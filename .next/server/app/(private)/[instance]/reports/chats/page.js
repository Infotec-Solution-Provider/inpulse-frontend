(()=>{var e={};e.id=969,e.ids=[969],e.modules={1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5656:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=new(s(89193)).ReportsClient("http://localhost:8006")},7066:e=>{"use strict";e.exports=require("node:tty")},7448:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>d,pages:()=>p,routeModule:()=>u,tree:()=>c});var r=s(65239),a=s(48088),n=s(88170),o=s.n(n),i=s(30893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let c={children:["",{children:["(private)",{children:["[instance]",{children:["reports",{children:["chats",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,58821)),"C:\\projects\\infotec\\inpulse\\inpulse-frontend\\src\\app\\(private)\\[instance]\\reports\\chats\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,26398)),"C:\\projects\\infotec\\inpulse\\inpulse-frontend\\src\\app\\(private)\\[instance]\\layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"C:\\projects\\infotec\\inpulse\\inpulse-frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,p=["C:\\projects\\infotec\\inpulse\\inpulse-frontend\\src\\app\\(private)\\[instance]\\reports\\chats\\page.tsx"],d={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(private)/[instance]/reports/chats/page",pathname:"/[instance]/reports/chats",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8291:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var r=s(60687);let a=(0,s(23428).A)((0,r.jsx)("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4z"}),"ArrowRightAlt");var n=s(43210),o=s(20858),i=s(60997),l=s(47651),c=s(86472),p=s(16184);function d(){let{users:e,generateReport:t}=(0,n.useContext)(o.N),[s,d]=(0,n.useState)({format:"pdf",userId:"*",startDate:"",endDate:""}),u=(0,n.useCallback)(async e=>{e.preventDefault(),t(s)},[s,t]);return(0,r.jsxs)("form",{className:"flex items-center gap-3 bg-indigo-700/5 px-4 py-4 text-xs shadow-md",onSubmit:u,children:[(0,r.jsxs)(i.A,{className:"w-32",select:!0,onChange:e=>d({...s,format:e.target.value}),label:"Formato",required:!0,size:"small",defaultValue:s.format,children:[(0,r.jsx)(l.A,{value:"txt",children:"TXT"}),(0,r.jsx)(l.A,{value:"pdf",children:"PDF"}),(0,r.jsx)(l.A,{value:"csv",children:"CSV"})]}),(0,r.jsx)(c.A,{className:"w-96",size:"small",options:[...e.map(e=>({label:e.NOME,value:String(e.CODIGO)})),{label:"Todos",value:"*"}],value:[...e.map(e=>({label:e.NOME,value:String(e.CODIGO)})),{label:"Todos",value:"*"}].find(e=>e.value===s.userId)||{label:"Todos",value:"*"},onChange:(e,t)=>{d({...s,userId:t?.value??"*"})},renderInput:e=>(0,r.jsx)(i.A,{...e,label:"Usu\xe1rio"})}),(0,r.jsxs)("div",{className:"ml-4 flex items-center gap-2",children:[(0,r.jsx)(i.A,{className:"w-52",type:"date",size:"small",onChange:e=>d({...s,startDate:e.target.value})}),(0,r.jsx)(a,{}),(0,r.jsx)(i.A,{className:"w-52",size:"small",type:"date",onChange:e=>d({...s,endDate:e.target.value})})]}),(0,r.jsx)("div",{className:"ml-auto",children:(0,r.jsx)(p.A,{title:"Exportar",type:"submit",variant:"outlined",size:"small",children:"Exportar"})})]})}},9649:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var r=s(60687),a=s(43210),n=s(63952),o=s(44366);let i=(0,s(23428).A)((0,r.jsx)("path",{d:"M18 2h-8L4 8v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-6 15-4-4h3V9.02L13 9v4h3z"}),"SimCardDownload");var l=s(43323),c=s(20858);function p({user:e,report:t}){let{deleteReport:s}=(0,a.useContext)(c.N),p=(0,a.useMemo)(()=>n.A.getFileDownloadUrl(t.fileId),[t.fileId]),d=(0,a.useMemo)(()=>{switch(t.status){case"pending":return"Processando";case"completed":return"Finalizado";case"failed":return"Falhou";default:return"Desconhecido"}},[t.status]);return(0,r.jsxs)("tr",{className:"w-max rounded-md text-sm even:bg-indigo-500/5",children:[(0,r.jsxs)("td",{className:"w-44 px-2 py-3 pl-8",children:[d,"pending"==t.status&&` (${t.progress}%)`]}),(0,r.jsx)("td",{className:"w-48 truncate px-2 py-3",children:e}),(0,r.jsx)("td",{className:"w-48 truncate px-2 py-3",children:o.Formatter.date(t.exportDate)}),(0,r.jsx)("td",{className:"w-28 truncate px-2 py-3",children:t.startDate}),(0,r.jsx)("td",{className:"w-28 truncate px-2 py-3",children:t.endDate}),(0,r.jsx)("td",{className:"w-24 truncate px-2 py-3",children:t.chats}),(0,r.jsx)("td",{className:"w-28 truncate px-2 py-3",children:t.messages}),(0,r.jsx)("td",{className:"w-24 truncate px-2 py-3",children:t.format.toUpperCase()}),(0,r.jsxs)("td",{className:"flex w-24 items-center justify-end gap-4 truncate px-2 py-3 pr-4",children:[(0,r.jsx)("a",{className:"transition-all hover:text-indigo-400",href:p,title:"Baixar",children:(0,r.jsx)(i,{})}),(0,r.jsx)("button",{className:"transition-all hover:text-red-400",title:"Excluir",type:"button",onClick:()=>s(t.id),children:(0,r.jsx)(l.A,{})})]})]})}function d(){let{reports:e,users:t}=(0,a.useContext)(c.N);return(0,r.jsx)("div",{className:"scrollbar-whatsapp mx-auto w-full overflow-y-scroll bg-indigo-700/5 dark:bg-indigo-900/10",children:(0,r.jsxs)("table",{className:"w-max text-sm text-black dark:text-white",children:[(0,r.jsx)("thead",{className:"sticky top-0 rounded-md bg-white shadow-sm dark:bg-indigo-900 dark:shadow-md",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"w-44 px-2 py-2 pl-8 text-left",children:"Status"}),(0,r.jsx)("th",{className:"w-48 px-2 py-2 text-left",children:"Usu\xe1rio"}),(0,r.jsx)("th",{className:"w-48 px-2 py-2 text-left",children:"Gerado em"}),(0,r.jsx)("th",{className:"w-28 px-2 py-2 text-left",children:"De"}),(0,r.jsx)("th",{className:"w-28 px-2 py-2 text-left",children:"At\xe9"}),(0,r.jsx)("th",{className:"w-24 px-2 py-2 text-left",children:"Chats"}),(0,r.jsx)("th",{className:"w-28 px-2 py-2 text-left",children:"Mensagens"}),(0,r.jsx)("th",{className:"w-24 px-2 py-2 text-left",children:"Formato"}),(0,r.jsx)("th",{className:"w-24 px-2 py-2 pr-4 text-left"})]})}),(0,r.jsx)("tbody",{className:"w-full py-2",children:e.map(e=>(0,r.jsx)(p,{report:e,user:t.find(t=>t.CODIGO==+e.userId)?.NOME||"Todos"},`report:${e.id}`))})]})})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20858:(e,t,s)=>{"use strict";s.d(t,{N:()=>d,default:()=>u});var r=s(60687),a=s(30601),n=s(35118),o=s(5656);s(27807),s(89193);var i=s(44366),l=s(16189),c=s(43210),p=s(93853);let d=(0,c.createContext)({});function u({children:e}){let{socket:t}=(0,c.useContext)(n.d),{token:s}=(0,c.useContext)(a.c),u=(0,l.usePathname)();(0,c.useMemo)(()=>u.split("/")[1],[u]);let[x,h]=(0,c.useState)([]),[m,f]=(0,c.useState)([]),v=(0,c.useCallback)(async e=>{try{await o.A.deleteChatsReport(e),h(t=>t.filter(t=>t.id!==e)),p.oR.success("Relat\xf3rio exclu\xeddo com sucesso!")}catch(e){p.oR.error("Falha ao excluir relat\xf3rio!\n"+(0,i.sanitizeErrorMessage)(e))}},[]),b=(0,c.useCallback)(async e=>{try{let t=await o.A.generateChatsReport(e);h(e=>[{...t,progress:0},...e]),p.oR.success("Relat\xf3rio em processamento, voc\xea ser\xe1 notificado quando estiver pronto!")}catch(e){p.oR.error("Falha ao criar relat\xf3rio!\n"+(0,i.sanitizeErrorMessage)(e))}},[]);return(0,c.useCallback)(e=>{h(t=>t.map(t=>t.id!==e.id||"chats"!==e.type?t:e.isCompleted?(p.oR.success("Relat\xf3rio gerado com sucesso!"),{...t,status:"completed",fileId:e.fileId,progress:100,chats:e.chats,messages:e.messages}):e.isFailed?(p.oR.error("Falha ao gerar relat\xf3rio!\n"+e.error),{...t,status:"failed"}):{...t,progress:+e.progress.toFixed(0)}))},[]),(0,r.jsx)(d.Provider,{value:{deleteReport:v,generateReport:b,reports:x,users:m},children:e})}},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},40719:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var r=s(12907);(0,r.registerClientReference)(function(){throw Error("Attempted to call ChatsReportContext() from the server but ChatsReportContext is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\projects\\infotec\\inpulse\\inpulse-frontend\\src\\app\\(private)\\[instance]\\reports\\chats\\chats-reports-context.tsx","ChatsReportContext");let a=(0,r.registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\projects\\\\infotec\\\\inpulse\\\\inpulse-frontend\\\\src\\\\app\\\\(private)\\\\[instance]\\\\reports\\\\chats\\\\chats-reports-context.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\projects\\infotec\\inpulse\\inpulse-frontend\\src\\app\\(private)\\[instance]\\reports\\chats\\chats-reports-context.tsx","default")},43323:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(23428),a=s(60687);let n=(0,r.A)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},43878:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\projects\\\\infotec\\\\inpulse\\\\inpulse-frontend\\\\src\\\\app\\\\(private)\\\\[instance]\\\\reports\\\\chats\\\\form.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\projects\\infotec\\inpulse\\inpulse-frontend\\src\\app\\(private)\\[instance]\\reports\\chats\\form.tsx","default")},44076:(e,t,s)=>{Promise.resolve().then(s.bind(s,20858)),Promise.resolve().then(s.bind(s,8291)),Promise.resolve().then(s.bind(s,9649))},45616:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\projects\\\\infotec\\\\inpulse\\\\inpulse-frontend\\\\src\\\\app\\\\(private)\\\\[instance]\\\\reports\\\\chats\\\\list.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\projects\\infotec\\inpulse\\inpulse-frontend\\src\\app\\(private)\\[instance]\\reports\\chats\\list.tsx","default")},48161:e=>{"use strict";e.exports=require("node:os")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57228:(e,t,s)=>{Promise.resolve().then(s.bind(s,40719)),Promise.resolve().then(s.bind(s,43878)),Promise.resolve().then(s.bind(s,45616))},58821:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(37413),a=s(43878),n=s(45616),o=s(40719);async function i(){return(0,r.jsx)("div",{className:"mx-auto box-border grid grid-rows-[max-content_1fr] gap-y-8 bg-white px-4 py-8 text-black dark:bg-gray-900 dark:text-white",children:(0,r.jsxs)(o.default,{children:[(0,r.jsx)(a.default,{}),(0,r.jsx)(n.default,{})]})})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63952:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=new(s(89193)).FilesClient("http://localhost:8003")},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[828,700,879,630,472,221],()=>s(7448));module.exports=r})();