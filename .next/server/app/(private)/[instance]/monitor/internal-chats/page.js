(()=>{var e={};e.id=638,e.ids=[638],e.modules={1044:(e,t,r)=>{Promise.resolve().then(r.bind(r,37840))},1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7066:e=>{"use strict";e.exports=require("node:tty")},8017:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var s=r(60687),n=r(43210),o=r(98577),a=r(86562),i=r(30076),l=r(60997),d=r(47651),u=r(83685),c=r(75396),p=r(97015),h=r(12039),m=r(61339),f=r(45172),x=r(32832),w=r(13555),A=r(87980),g=r(13330),v=r(76897),b=r(39513),y=r(13942);let j=(0,w.Ay)(A.A)(({theme:e})=>({border:"none",[`&.${g.A.head}`]:{color:"dark"===e.palette.mode?e.palette.common.white:e.palette.text.primary,backgroundColor:"dark"===e.palette.mode?"transparent":e.palette.grey[100],fontWeight:"bold"},[`&.${g.A.body}`]:{fontSize:14,color:"dark"===e.palette.mode?e.palette.common.white:e.palette.text.primary}})),C=(0,w.Ay)(v.A)(({theme:e})=>({"&:nth-of-type(even)":{backgroundColor:"dark"===e.palette.mode?"rgba(67, 56, 202, 0.05)":e.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}));(0,w.Ay)(b.A)(({theme:e})=>({[`& .${y.A.root}`]:{color:"dark"===e.palette.mode?e.palette.common.white:e.palette.text.primary,"&.Mui-selected":{backgroundColor:e.palette.primary.main,color:e.palette.common.white},"&:hover":{backgroundColor:e.palette.primary.dark,color:e.palette.common.white}}}));var D=r(80312);function N(){let{openInternalChat:e,getInternalChatsMonitor:t,monitorInternalChats:r,setCurrentChat:w}=(0,n.useContext)(p.xI),{openModal:A,closeModal:g}=(0,n.useContext)(h.BR),[v,b]=(0,n.useState)(""),[y,N]=(0,n.useState)(""),[k,P]=(0,n.useState)(""),[q,S]=(0,n.useState)(""),[O,I]=(0,n.useState)(""),[_,T]=(0,n.useState)(""),z=(0,n.useMemo)(()=>[...r],[r]),M=(0,n.useMemo)(()=>z.filter(e=>{let t=!!e.groupName;if(v&&!String(e.id).includes(v)||y&&(t?"grupo":"chat")!==y)return!1;let r=t?e.users.map(e=>e.NOME).join(", "):e.contactName||e.customer?.RAZAO||"";if(k&&!r.toLowerCase().includes(k.toLowerCase()))return!1;let s=new Date(e.startDate||e.startedAt).toLocaleDateString();if(q&&!s.includes(q))return!1;let n=e.endDate||e.finishedAt?new Date(e.endDate||e.finishedAt).toLocaleDateString():"";if(O&&!n.includes(O))return!1;let o=e.result||"";return!_||!!o.toLowerCase().includes(_.toLowerCase())}),[z,v,y,k,q,O,_]),E=t=>{t&&(w(t),e(t),A((0,s.jsxs)("div",{className:"relative flex h-[80vh] w-[500px] flex-col rounded-md bg-slate-900 shadow-xl dark:bg-slate-800",children:[(0,s.jsx)("button",{onClick:()=>g?.(),className:"absolute right-2 top-1 z-10 text-gray-700 hover:text-red-500 dark:text-gray-300 dark:hover:text-red-300",children:"âœ•"}),(0,s.jsxs)(m.A,{children:[(0,s.jsx)(f.A,{avatarUrl:"",name:t.groupName||t.users[0].NOME,customerName:t.groupDescription||t.users[0].NOME_EXIBICAO||"",phone:t.users[0].SETOR_NOME||"",chatType:t.chatType,codErp:t.customer?.COD_ERP||null,cpfCnpj:t.customer?.CPF_CNPJ||null,customerId:t.customer?.CODIGO||null,startDate:t.startedAt?new Date(t.startedAt).toDateString():null}),(0,s.jsx)("div",{className:"flex-1 scrollbar-whatsapp bg-white text-black dark:bg-slate-900 dark:text-white drop-shadow-md",children:(0,s.jsx)(D.A,{})}),(0,s.jsx)("div",{className:"bg-white text-black dark:bg-slate-900 p-2 border-t border-gray-200 dark:border-gray-700",children:(0,s.jsx)(x.A,{})})]})]})))};return(0,s.jsx)("div",{className:"flex flex-col  px-10 pt-5 w-screen  h-screen box-border relative bg-white text-black dark:bg-gray-900 dark:text-white",children:(0,s.jsx)(o.A,{className:"mx-auto max-h-[75vh] overflow-auto  scrollbar-whatsapp rounded-md bg-indigo-700 bg-opacity-5 shadow-md",children:(0,s.jsxs)(a.A,{className:"max-h-[100%] overflow-auto",children:[(0,s.jsx)(i.A,{children:(0,s.jsxs)(C,{className:"sticky top-0 rounded-md bg-indigo-900 z-50 ",children:[(0,s.jsx)(j,{className:"px-2 py-2 text-center",children:"A\xe7\xf5es"}),(0,s.jsx)(j,{children:(0,s.jsx)(l.A,{value:v,slotProps:{input:{disableUnderline:!0}},onChange:e=>b(e.target.value),placeholder:"C\xf3digo",size:"small",variant:"standard",style:{width:"5rem"}})}),(0,s.jsx)(j,{children:(0,s.jsxs)(l.A,{name:"Tipo",label:"Tipo",variant:"standard",style:{width:"7rem",marginTop:"-12px"},select:!0,slotProps:{input:{disableUnderline:!0}},onChange:e=>N(e.target.value),children:[(0,s.jsx)(d.A,{value:"",children:"Todos"},"none"),(0,s.jsx)(d.A,{value:"grupo",children:"Grupo"},"grupo"),(0,s.jsx)(d.A,{value:"chat",children:"Chat"},"chat")]})}),(0,s.jsx)(j,{children:(0,s.jsx)(l.A,{value:k,slotProps:{input:{disableUnderline:!0}},onChange:e=>P(e.target.value),placeholder:"Participantes",size:"small",variant:"standard",className:"w-full"})}),(0,s.jsx)(j,{children:(0,s.jsx)(l.A,{value:q,onChange:e=>S(e.target.value),placeholder:"Data In\xedcio",size:"small",slotProps:{input:{disableUnderline:!0}},variant:"standard",className:"w-full"})}),(0,s.jsx)(j,{children:(0,s.jsx)(l.A,{value:O,onChange:e=>I(e.target.value),placeholder:"Data Fim",size:"small",variant:"standard",className:"w-full",slotProps:{input:{disableUnderline:!0}}})})]})}),(0,s.jsx)("tbody",{children:M.map((e,t)=>{let r=!!e.groupName;return(0,s.jsxs)("tr",{className:"even:bg-indigo-200/5",children:[(0,s.jsx)("td",{className:"px-4 py-2 text-center",children:(0,s.jsx)("div",{className:"flex justify-center gap-1",children:(0,s.jsx)(u.A,{size:"small",onClick:()=>E(e),children:(0,s.jsx)(c.A,{fontSize:"small"})})})}),(0,s.jsx)(j,{className:"px-2 py-3",children:e.id}),(0,s.jsx)(j,{className:"px-2 py-3",children:r?"Grupo":"Chat"}),(0,s.jsx)(j,{className:"px-2 py-3",children:e.users.map(e=>e.NOME).join(", ")}),(0,s.jsx)(j,{className:"px-2 py-3",children:new Date(e?.startDate||e?.startedAt).toLocaleDateString()}),(0,s.jsx)(j,{className:"px-2 py-3",children:e?.endDate||e?.finishedAt?new Date(e?.endDate||e?.finishedAt).toLocaleDateString():""})]},t)})})]})})})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},16188:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>d});var s=r(65239),n=r(48088),o=r(88170),a=r.n(o),i=r(30893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d={children:["",{children:["(private)",{children:["[instance]",{children:["monitor",{children:["internal-chats",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,37840)),"C:\\projects\\infotec\\inpulse\\inpulse-frontend\\src\\app\\(private)\\[instance]\\monitor\\internal-chats\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,67587)),"C:\\projects\\infotec\\inpulse\\inpulse-frontend\\src\\app\\(private)\\[instance]\\monitor\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,26398)),"C:\\projects\\infotec\\inpulse\\inpulse-frontend\\src\\app\\(private)\\[instance]\\layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"C:\\projects\\infotec\\inpulse\\inpulse-frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,u=["C:\\projects\\infotec\\inpulse\\inpulse-frontend\\src\\app\\(private)\\[instance]\\monitor\\internal-chats\\page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/(private)/[instance]/monitor/internal-chats/page",pathname:"/[instance]/monitor/internal-chats",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},23566:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>c,uk:()=>u});var s=r(60687),n=r(43210),o=r(52171),a=r(97015),i=r(30601);let l={categories:{showCustomerChats:!0,showInternalChats:!0,showInternalGroups:!0,showSchedules:!0},user:"all",showBots:!1,showOngoing:!0,showFinished:!0,showOnlyScheduled:!1,startedAt:{from:null,to:null},finishedAt:{from:null,to:null},scheduledAt:{from:null,to:null},scheduledTo:{from:null,to:null},scheduledBy:"all",scheduledFor:"all"},d=(0,n.createContext)({});function u({children:e}){let{monitorChats:t,getChatsMonitor:r,getMonitorSchedules:u,monitorSchedules:c}=(0,o.jb)(),{monitorInternalChats:p,getInternalChatsMonitor:h}=(0,a.Ay)(),{token:m}=(0,n.useContext)(i.c),[f,x]=(0,n.useState)(l),w=(0,n.useMemo)(()=>{let e=p.filter(e=>{if(e.isGroup&&!f.categories.showInternalGroups||!e.isGroup&&!f.categories.showInternalChats||"all"!==f.user&&!e.participants.some(e=>e.userId===f.user)||f.showOnlyScheduled)return!1;let t=new Date(e.startedAt);return!(f.startedAt.from&&t<new Date(f.startedAt.from)||f.startedAt.to&&t>new Date(f.startedAt.to))});return[...e,...t.filter(e=>{if(!f.categories.showCustomerChats||"all"!==f.user&&e.userId!==f.user||!f.showBots&&null!==e.botId||f.showOnlyScheduled&&!e.isSchedule)return!1;let t=null===e.finishedAt&&null!==e.startedAt,r=null!==e.finishedAt;return!(!f.showOngoing&&!f.showFinished||f.showOngoing&&!f.showFinished&&!t||!f.showOngoing&&f.showFinished&&!r||f.startedAt.from&&new Date(e.startedAt)<new Date(f.startedAt.from)||f.startedAt.to&&new Date(e.startedAt)>new Date(f.startedAt.to)||f.finishedAt.from&&e.finishedAt&&new Date(e.finishedAt)<new Date(f.finishedAt.from)||f.finishedAt.to&&e.finishedAt&&new Date(e.finishedAt)>new Date(f.finishedAt.to)||f.scheduledAt.from&&e.schedule?.scheduledAt&&new Date(e.schedule.scheduledAt)<new Date(f.scheduledAt.from)||f.scheduledAt.to&&e.schedule?.scheduledAt&&new Date(e.schedule.scheduledAt)>new Date(f.scheduledAt.to)||f.scheduledTo.from&&e.schedule?.scheduleDate&&new Date(e.schedule.scheduleDate)<new Date(f.scheduledTo.from)||f.scheduledTo.to&&e.schedule?.scheduleDate&&new Date(e.schedule.scheduleDate)>new Date(f.scheduledTo.to))}),...c.filter(e=>!(!f.categories.showSchedules||"all"!==f.scheduledBy&&e.scheduledBy!==f.scheduledBy||"all"!==f.scheduledFor&&e.scheduledFor!==f.scheduledFor||f.scheduledAt.from&&new Date(e.scheduledAt)<new Date(f.scheduledAt.from)||f.scheduledAt.to&&new Date(e.scheduledAt)>new Date(f.scheduledAt.to)))].sort((e,t)=>{let r=e=>new Date("startedAt"in e&&e.startedAt?e.startedAt:"scheduledAt"in e&&e.scheduledAt?e.scheduledAt:0),s=r(e),n=r(t);return s.getTime()-n.getTime()})},[t,p,f]);return(0,s.jsx)(d.Provider,{value:{chats:w,filters:f,setFilters:x,resetFilters:()=>{x(l)}},children:e})}function c(){let e=(0,n.useContext)(d);if(!e)throw Error("useMonitorContext must be used within a MonitorProvider");return e}},27017:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(60687),n=r(23566);function o({children:e}){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(n.uk,{children:e})})}},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37840:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\projects\\\\infotec\\\\inpulse\\\\inpulse-frontend\\\\src\\\\app\\\\(private)\\\\[instance]\\\\monitor\\\\internal-chats\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\projects\\infotec\\inpulse\\inpulse-frontend\\src\\app\\(private)\\[instance]\\monitor\\internal-chats\\page.tsx","default")},48161:e=>{"use strict";e.exports=require("node:os")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67587:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\projects\\\\infotec\\\\inpulse\\\\inpulse-frontend\\\\src\\\\app\\\\(private)\\\\[instance]\\\\monitor\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\projects\\infotec\\inpulse\\inpulse-frontend\\src\\app\\(private)\\[instance]\\monitor\\layout.tsx","default")},74075:e=>{"use strict";e.exports=require("zlib")},75396:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(23428),n=r(60687);let o=(0,s.A)((0,n.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},77076:(e,t,r)=>{Promise.resolve().then(r.bind(r,8017))},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},80312:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var s=r(60687),n=r(93108),o=r(43210),a=r(52171),i=r(97015),l=r(30601),d=r(57810);function u(){let{currentChatMessages:e,currentChat:t}=(0,o.useContext)(a.ce),{currentInternalChatMessages:r,users:u}=(0,o.useContext)(i.xI),{user:c}=(0,o.useContext)(l.c),p=(0,o.useRef)(null),h=(0,o.useMemo)(()=>{let e=new Map;for(let t of u)e.set(t.CODIGO,t);return e},[u]);return(0,s.jsxs)("ul",{className:"flex h-full w-full flex-col gap-2 scrollbar-whatsap p-2",ref:p,children:[t?.chatType==="wpp"&&e.length>0&&e.map(e=>(0,s.jsx)(n.Ay,{id:e.id,style:e.from.startsWith("system")?"system":e.from.startsWith("bot")||e.from.startsWith("me:")?"sent":"received",text:e.body,date:new Date(+e.timestamp),status:e.status,fileId:e.fileId,fileName:e.fileName,fileType:e.fileType,fileSize:e.fileSize},`message_${e.id}`)),t?.chatType==="internal"&&h.size>0&&r&&r.length>0&&r.map((e,t,r)=>{var n;let o=Number(e.from.split(":")[1]),a=h.get(o),i=t>0?r[t-1]:null,l=!a||!i||i.from!==e.from;return(0,s.jsx)(d.A,{id:e.id,style:(n=c.CODIGO,"system"===e.from?"system":e.from===`user:${n}`?"sent":"received"),groupFirst:l,sentBy:a?a.NOME:"Desconhecido",text:e.body,date:new Date(+e.timestamp),status:e.status,fileId:e.fileId,fileName:e.fileName,fileType:e.fileType,fileSize:e.fileSize},`message_${e.id}`)})]})}},81630:e=>{"use strict";e.exports=require("http")},81956:(e,t,r)=>{Promise.resolve().then(r.bind(r,67587))},83997:e=>{"use strict";e.exports=require("tty")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},95460:(e,t,r)=>{Promise.resolve().then(r.bind(r,27017))}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[828,700,879,630,632,722,467,221,790],()=>r(16188));module.exports=s})();