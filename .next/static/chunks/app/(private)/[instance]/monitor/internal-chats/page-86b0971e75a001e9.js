(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7638],{18124:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var a=r(95155),l=r(12115),s=r(44296),o=r(17976),n=r(56033),i=r(73731),d=r(76380),c=r(3127),u=r(58674),m=r(40931),p=r(92697),h=r(39447),x=r(97609),y=r(70266),v=r(75955),f=r(59832),g=r(58416),A=r(90404),b=r(2044),j=r(9560);let w=(0,v.Ay)(f.A)(e=>{let{theme:t}=e;return{border:"none",["&.".concat(g.A.head)]:{color:"dark"===t.palette.mode?t.palette.common.white:t.palette.text.primary,backgroundColor:"dark"===t.palette.mode?"transparent":t.palette.grey[100],fontWeight:"bold"},["&.".concat(g.A.body)]:{fontSize:14,color:"dark"===t.palette.mode?t.palette.common.white:t.palette.text.primary}}}),N=(0,v.Ay)(A.A)(e=>{let{theme:t}=e;return{"&:nth-of-type(even)":{backgroundColor:"dark"===t.palette.mode?"rgba(67, 56, 202, 0.05)":t.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}});(0,v.Ay)(b.A)(e=>{let{theme:t}=e;return{["& .".concat(j.A.root)]:{color:"dark"===t.palette.mode?t.palette.common.white:t.palette.text.primary,"&.Mui-selected":{backgroundColor:t.palette.primary.main,color:t.palette.common.white},"&:hover":{backgroundColor:t.palette.primary.dark,color:t.palette.common.white}}}});var C=r(97308);function k(){let{openInternalChat:e,getInternalChatsMonitor:t,monitorInternalChats:r,setCurrentChat:v}=(0,l.useContext)(m.xI),{openModal:f,closeModal:g}=(0,l.useContext)(p.BR),[A,b]=(0,l.useState)(""),[j,k]=(0,l.useState)(""),[D,T]=(0,l.useState)(""),[S,E]=(0,l.useState)(""),[I,O]=(0,l.useState)(""),[M,L]=(0,l.useState)("");(0,l.useEffect)(()=>{t()},[t]);let z=(0,l.useMemo)(()=>[...r],[r]),P=(0,l.useMemo)(()=>z.filter(e=>{var t;let r=!!e.groupName;if(A&&!String(e.id).includes(A)||j&&(r?"grupo":"chat")!==j)return!1;let a=r?e.users.map(e=>e.NOME).join(", "):e.contactName||(null===(t=e.customer)||void 0===t?void 0:t.RAZAO)||"";if(D&&!a.toLowerCase().includes(D.toLowerCase()))return!1;let l=new Date(e.startDate||e.startedAt).toLocaleDateString();if(S&&!l.includes(S))return!1;let s=e.endDate||e.finishedAt?new Date(e.endDate||e.finishedAt).toLocaleDateString():"";if(I&&!s.includes(I))return!1;let o=e.result||"";return!M||!!o.toLowerCase().includes(M.toLowerCase())}),[z,A,j,D,S,I,M]),_=t=>{var r,l,s;t&&(v(t),e(t),f((0,a.jsxs)("div",{className:"relative flex h-[80vh] w-[500px] flex-col rounded-md bg-slate-900 shadow-xl dark:bg-slate-800",children:[(0,a.jsx)("button",{onClick:()=>null==g?void 0:g(),className:"absolute right-2 top-1 z-10 text-gray-700 hover:text-red-500 dark:text-gray-300 dark:hover:text-red-300",children:"âœ•"}),(0,a.jsxs)(h.A,{children:[(0,a.jsx)(x.A,{avatarUrl:"",name:t.groupName||t.users[0].NOME,customerName:t.groupDescription||t.users[0].NOME_EXIBICAO||"",phone:t.users[0].SETOR_NOME||"",chatType:t.chatType,codErp:(null===(r=t.customer)||void 0===r?void 0:r.COD_ERP)||null,cpfCnpj:(null===(l=t.customer)||void 0===l?void 0:l.CPF_CNPJ)||null,customerId:(null===(s=t.customer)||void 0===s?void 0:s.CODIGO)||null,startDate:t.startedAt?new Date(t.startedAt).toDateString():null}),(0,a.jsx)("div",{className:"flex-1 scrollbar-whatsapp bg-white text-black dark:bg-slate-900 dark:text-white drop-shadow-md",children:(0,a.jsx)(C.A,{})}),(0,a.jsx)("div",{className:"bg-white text-black dark:bg-slate-900 p-2 border-t border-gray-200 dark:border-gray-700",children:(0,a.jsx)(y.A,{})})]})]})))};return(0,a.jsx)("div",{className:"flex flex-col  px-10 pt-5 w-screen  h-screen box-border relative bg-white text-black dark:bg-gray-900 dark:text-white",children:(0,a.jsx)(s.A,{className:"mx-auto max-h-[75vh] overflow-auto  scrollbar-whatsapp rounded-md bg-indigo-700 bg-opacity-5 shadow-md",children:(0,a.jsxs)(o.A,{className:"max-h-[100%] overflow-auto",children:[(0,a.jsx)(n.A,{children:(0,a.jsxs)(N,{className:"sticky top-0 rounded-md bg-indigo-900 z-50 ",children:[(0,a.jsx)(w,{className:"px-2 py-2 text-center",children:"A\xe7\xf5es"}),(0,a.jsx)(w,{children:(0,a.jsx)(i.A,{value:A,slotProps:{input:{disableUnderline:!0}},onChange:e=>b(e.target.value),placeholder:"C\xf3digo",size:"small",variant:"standard",style:{width:"5rem"}})}),(0,a.jsx)(w,{children:(0,a.jsxs)(i.A,{name:"Tipo",label:"Tipo",variant:"standard",style:{width:"7rem",marginTop:"-12px"},select:!0,slotProps:{input:{disableUnderline:!0}},onChange:e=>k(e.target.value),children:[(0,a.jsx)(d.A,{value:"",children:"Todos"},"none"),(0,a.jsx)(d.A,{value:"grupo",children:"Grupo"},"grupo"),(0,a.jsx)(d.A,{value:"chat",children:"Chat"},"chat")]})}),(0,a.jsx)(w,{children:(0,a.jsx)(i.A,{value:D,slotProps:{input:{disableUnderline:!0}},onChange:e=>T(e.target.value),placeholder:"Participantes",size:"small",variant:"standard",className:"w-full"})}),(0,a.jsx)(w,{children:(0,a.jsx)(i.A,{value:S,onChange:e=>E(e.target.value),placeholder:"Data In\xedcio",size:"small",slotProps:{input:{disableUnderline:!0}},variant:"standard",className:"w-full"})}),(0,a.jsx)(w,{children:(0,a.jsx)(i.A,{value:I,onChange:e=>O(e.target.value),placeholder:"Data Fim",size:"small",variant:"standard",className:"w-full",slotProps:{input:{disableUnderline:!0}}})})]})}),(0,a.jsx)("tbody",{children:P.map((e,t)=>{let r=!!e.groupName;return(0,a.jsxs)("tr",{className:"even:bg-indigo-200/5",children:[(0,a.jsx)("td",{className:"px-4 py-2 text-center",children:(0,a.jsx)("div",{className:"flex justify-center gap-1",children:(0,a.jsx)(c.A,{size:"small",onClick:()=>_(e),children:(0,a.jsx)(u.A,{fontSize:"small"})})})}),(0,a.jsx)(w,{className:"px-2 py-3",children:e.id}),(0,a.jsx)(w,{className:"px-2 py-3",children:r?"Grupo":"Chat"}),(0,a.jsx)(w,{className:"px-2 py-3",children:e.users.map(e=>e.NOME).join(", ")}),(0,a.jsx)(w,{className:"px-2 py-3",children:new Date((null==e?void 0:e.startDate)||(null==e?void 0:e.startedAt)).toLocaleDateString()}),(0,a.jsx)(w,{className:"px-2 py-3",children:(null==e?void 0:e.endDate)||(null==e?void 0:e.finishedAt)?new Date((null==e?void 0:e.endDate)||(null==e?void 0:e.finishedAt)).toLocaleDateString():""})]},t)})})]})})})}},21888:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,Y:()=>s});var a=r(55170),l=r(90870);function s(e){return(0,l.Ay)("MuiListItemButton",e)}let o=(0,a.A)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"])},58674:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(57515),l=r(95155);let s=(0,a.A)((0,l.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},85222:(e,t,r)=>{"use strict";r.d(t,{A:()=>y});var a=r(12115),l=r(52596),s=r(17472),o=r(31628),n=r(700),i=r(99801),d=r(75955),c=r(10186),u=r(9546),m=r(47798),p=r(95155);let h=e=>{let{classes:t,inset:r,primary:a,secondary:l,dense:o}=e;return(0,s.A)({root:["root",r&&"inset",o&&"dense",a&&l&&"multiline"],primary:["primary"],secondary:["secondary"]},u.b,t)},x=(0,d.Ay)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[{["& .".concat(u.A.primary)]:t.primary},{["& .".concat(u.A.secondary)]:t.secondary},t.root,r.inset&&t.inset,r.primary&&r.secondary&&t.multiline,r.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[".".concat(o.A.root,":where(& .").concat(u.A.primary,")")]:{display:"block"},[".".concat(o.A.root,":where(& .").concat(u.A.secondary,")")]:{display:"block"},variants:[{props:e=>{let{ownerState:t}=e;return t.primary&&t.secondary},style:{marginTop:6,marginBottom:6}},{props:e=>{let{ownerState:t}=e;return t.inset},style:{paddingLeft:56}}]}),y=a.forwardRef(function(e,t){let r=(0,c.b)({props:e,name:"MuiListItemText"}),{children:s,className:o,disableTypography:d=!1,inset:u=!1,primary:y,primaryTypographyProps:v,secondary:f,secondaryTypographyProps:g,slots:A={},slotProps:b={},...j}=r,{dense:w}=a.useContext(i.A),N=null!=y?y:s,C=f,k={...r,disableTypography:d,inset:u,primary:!!N,secondary:!!C,dense:w},D=h(k),T={slots:A,slotProps:{primary:v,secondary:g,...b}},[S,E]=(0,m.A)("root",{className:(0,l.A)(D.root,o),elementType:x,externalForwardedProps:{...T,...j},ownerState:k,ref:t}),[I,O]=(0,m.A)("primary",{className:D.primary,elementType:n.A,externalForwardedProps:T,ownerState:k}),[M,L]=(0,m.A)("secondary",{className:D.secondary,elementType:n.A,externalForwardedProps:T,ownerState:k});return null==N||N.type===n.A||d||(N=(0,p.jsx)(I,{variant:w?"body2":"body1",component:(null==O?void 0:O.variant)?void 0:"span",...O,children:N})),null==C||C.type===n.A||d||(C=(0,p.jsx)(M,{variant:"body2",color:"textSecondary",...L,children:C})),(0,p.jsxs)(S,{...E,children:[N,C]})})},87804:(e,t,r)=>{Promise.resolve().then(r.bind(r,18124))},97308:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(95155),l=r(69926),s=r(12115),o=r(88702),n=r(40931),i=r(98892),d=r(63699);function c(){let{currentChatMessages:e,currentChat:t}=(0,s.useContext)(o.ce),{currentInternalChatMessages:r,users:c}=(0,s.useContext)(n.xI),{user:u}=(0,s.useContext)(i.c),m=(0,s.useRef)(null),p=(0,s.useMemo)(()=>{let e=new Map;for(let t of c)e.set(t.CODIGO,t);return e},[c]);return(0,s.useEffect)(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[e,r]),(0,s.useEffect)(()=>{let e=()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)};return document.addEventListener("scroll-to-bottom",e),()=>{document.removeEventListener("scroll-to-bottom",e)}},[]),(0,a.jsxs)("ul",{className:"flex h-full w-full flex-col gap-2 scrollbar-whatsap p-2",ref:m,children:[(null==t?void 0:t.chatType)==="wpp"&&e.length>0&&e.map(e=>(0,a.jsx)(l.Ay,{id:e.id,style:e.from.startsWith("system")?"system":e.from.startsWith("bot")||e.from.startsWith("me:")?"sent":"received",text:e.body,date:new Date(+e.timestamp),status:e.status,fileId:e.fileId,fileName:e.fileName,fileType:e.fileType,fileSize:e.fileSize},"message_".concat(e.id))),(null==t?void 0:t.chatType)==="internal"&&p.size>0&&r&&r.length>0&&r.map((e,t,r)=>{var l;let s=Number(e.from.split(":")[1]),o=p.get(s),n=t>0?r[t-1]:null,i=!o||!n||n.from!==e.from;return(0,a.jsx)(d.A,{id:e.id,style:(l=u.CODIGO,"system"===e.from?"system":e.from==="user:".concat(l)?"sent":"received"),groupFirst:i,sentBy:o?o.NOME:"Desconhecido",text:e.body,date:new Date(+e.timestamp),status:e.status,fileId:e.fileId,fileName:e.fileName,fileType:e.fileType,fileSize:e.fileSize},"message_".concat(e.id))})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2666,4488,9141,8534,1620,6805,4954,35,5332,4290,3729,9952,8702,931,9595,8441,1684,7358],()=>t(87804)),_N_E=e.O()}]);