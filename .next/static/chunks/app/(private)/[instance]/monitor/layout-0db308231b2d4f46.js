(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3663],{5180:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>i,uk:()=>a});var d=s(95155),l=s(12115),o=s(88702),n=s(40931),r=s(98892);let u={categories:{showCustomerChats:!0,showInternalChats:!0,showInternalGroups:!0,showSchedules:!0},user:"all",showBots:!1,showOngoing:!0,showFinished:!0,showOnlyScheduled:!1,startedAt:{from:null,to:null},finishedAt:{from:null,to:null},scheduledAt:{from:null,to:null},scheduledTo:{from:null,to:null},scheduledBy:"all",scheduledFor:"all"},h=(0,l.createContext)({});function a(e){let{children:t}=e,{monitorChats:s,getChatsMonitor:a,getMonitorSchedules:i,monitorSchedules:c}=(0,o.jb)(),{monitorInternalChats:w,getInternalChatsMonitor:A}=(0,n.Ay)(),{token:f}=(0,l.useContext)(r.c);(0,l.useEffect)(()=>{f&&(i(),a(),A())},[a,A,i,f]);let[D,m]=(0,l.useState)(u),g=(0,l.useMemo)(()=>{let e=w.filter(e=>{if(e.isGroup&&!D.categories.showInternalGroups||!e.isGroup&&!D.categories.showInternalChats||"all"!==D.user&&!e.participants.some(e=>e.userId===D.user)||D.showOnlyScheduled)return!1;let t=new Date(e.startedAt);return!(D.startedAt.from&&t<new Date(D.startedAt.from)||D.startedAt.to&&t>new Date(D.startedAt.to))});return[...e,...s.filter(e=>{var t,s,d,l;if(!D.categories.showCustomerChats||"all"!==D.user&&e.userId!==D.user||!D.showBots&&null!==e.botId||D.showOnlyScheduled&&!e.isSchedule)return!1;let o=null===e.finishedAt&&null!==e.startedAt,n=null!==e.finishedAt;return!(!D.showOngoing&&!D.showFinished||D.showOngoing&&!D.showFinished&&!o||!D.showOngoing&&D.showFinished&&!n||D.startedAt.from&&new Date(e.startedAt)<new Date(D.startedAt.from)||D.startedAt.to&&new Date(e.startedAt)>new Date(D.startedAt.to)||D.finishedAt.from&&e.finishedAt&&new Date(e.finishedAt)<new Date(D.finishedAt.from)||D.finishedAt.to&&e.finishedAt&&new Date(e.finishedAt)>new Date(D.finishedAt.to)||D.scheduledAt.from&&(null===(t=e.schedule)||void 0===t?void 0:t.scheduledAt)&&new Date(e.schedule.scheduledAt)<new Date(D.scheduledAt.from)||D.scheduledAt.to&&(null===(s=e.schedule)||void 0===s?void 0:s.scheduledAt)&&new Date(e.schedule.scheduledAt)>new Date(D.scheduledAt.to)||D.scheduledTo.from&&(null===(d=e.schedule)||void 0===d?void 0:d.scheduleDate)&&new Date(e.schedule.scheduleDate)<new Date(D.scheduledTo.from)||D.scheduledTo.to&&(null===(l=e.schedule)||void 0===l?void 0:l.scheduleDate)&&new Date(e.schedule.scheduleDate)>new Date(D.scheduledTo.to))}),...c.filter(e=>!(!D.categories.showSchedules||"all"!==D.scheduledBy&&e.scheduledBy!==D.scheduledBy||"all"!==D.scheduledFor&&e.scheduledFor!==D.scheduledFor||D.scheduledAt.from&&new Date(e.scheduledAt)<new Date(D.scheduledAt.from)||D.scheduledAt.to&&new Date(e.scheduledAt)>new Date(D.scheduledAt.to)))].sort((e,t)=>{let s=e=>new Date("startedAt"in e&&e.startedAt?e.startedAt:"scheduledAt"in e&&e.scheduledAt?e.scheduledAt:0),d=s(e),l=s(t);return d.getTime()-l.getTime()})},[s,w,D]);return(0,d.jsx)(h.Provider,{value:{chats:g,filters:D,setFilters:m,resetFilters:()=>{m(u)}},children:t})}function i(){let e=(0,l.useContext)(h);if(!e)throw Error("useMonitorContext must be used within a MonitorProvider");return e}},73557:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var d=s(95155),l=s(5180);function o(e){let{children:t}=e;return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(l.uk,{children:t})})}},87116:(e,t,s)=>{Promise.resolve().then(s.bind(s,73557))}},e=>{var t=t=>e(e.s=t);e.O(0,[4488,9141,8534,1620,6805,35,8702,931,8441,1684,7358],()=>t(87116)),_N_E=e.O()}]);