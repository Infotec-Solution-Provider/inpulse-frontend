(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5894],{19505:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(57515),l=a(95155);let n=(0,r.A)((0,l.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},28890:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(57515),l=a(95155);let n=(0,r.A)((0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},56204:(e,t,a)=>{"use strict";a.d(t,{Jj:()=>k,Ay:()=>N,GC:()=>w});var r=a(95155),l=a(12115),n=a(54607),o=a(98892),i=a(42732),c=a(38543),s=a(88702),d=a(16324),u=a(27943),h=a(56278),x=a(54492),p=a(3127),m=a(99927),j=a(73731),A=a(22883),v=a(71977),g=a(68534),f=a(69242);function b(e){let{contact:t}=e,{closeModal:a,modal:n,createContact:o,updateContact:i}=w(),s=!!t,[b,C]=(0,l.useState)((null==t?void 0:t.name)||""),[y,k]=(0,l.useState)("+55"),[N,M]=(0,l.useState)(""),S=(0,d.A)(),D=(0,u.A)(S.breakpoints.down("sm")),R=e=>{let t=e.replace(/\D/g,"");return t.length<=2?"(".concat(t):t.length<=6?"(".concat(t.slice(0,2),") ").concat(t.slice(2)):t.length<=10?"(".concat(t.slice(0,2),") ").concat(t.slice(2,6),"-").concat(t.slice(6)):"(".concat(t.slice(0,2),") ").concat(t.slice(2,7),"-").concat(t.slice(7,11))};return(0,r.jsxs)(h.A,{open:!!n,onClose:(e,t)=>{"backdropClick"!==t&&a()},fullScreen:D,maxWidth:!1,sx:{"& .MuiDialog-paper":{width:"360px",maxWidth:"90vw",borderRadius:3,padding:2}},children:[(0,r.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 16px"},children:[s?"Editar Contato":"Cadastrar Contato",(0,r.jsx)(p.A,{onClick:a,children:(0,r.jsx)(f.A,{})})]}),(0,r.jsxs)(m.A,{sx:{display:"flex",flexDirection:"column",gap:2,paddingTop:5},children:[(0,r.jsx)(j.A,{label:"Nome",fullWidth:!0,value:b,onChange:e=>C(e.target.value),variant:"filled"}),!s&&(0,r.jsxs)(A.A,{direction:"row",spacing:1,children:[(0,r.jsx)(j.A,{label:"DDI",value:y,onChange:e=>k(e.target.value),sx:{width:"80px"},variant:"filled"}),(0,r.jsx)(j.A,{label:"N\xfamero",placeholder:"(11) 91234-5678",fullWidth:!0,value:N,variant:"filled",onChange:e=>M(R(e.target.value))})]})]}),(0,r.jsxs)(v.A,{sx:{justifyContent:"flex-end"},children:[(0,r.jsx)(g.A,{color:"error",onClick:a,children:"Cancelar"}),(0,r.jsx)(g.A,{variant:"contained",onClick:()=>{if(!b.trim()){c.oR.error("O nome \xe9 obrigat\xf3rio!");return}if(s)i(t.id,b);else{if(!N.trim()||!y.trim()){c.oR.error("Telefone completo (DDI + N\xfamero) \xe9 obrigat\xf3rio!");return}o(b,"".concat(y).concat(N.replace(/\D/g,"")))}a()},children:s?"Salvar":"Cadastrar"})]})]})}var C=a(700);function y(e){let{contact:t}=e,{deleteContact:a,closeModal:l}=w(),n=(0,d.A)(),o=(0,u.A)(n.breakpoints.down("sm"));return(0,r.jsxs)(h.A,{open:!0,onClose:(e,t)=>{"backdropClick"!==t&&l()},fullScreen:o,maxWidth:!1,sx:{"& .MuiDialog-paper":{width:"360px",maxWidth:"90vw",borderRadius:3,padding:2}},children:[(0,r.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 16px"},children:["Deletar Contato",(0,r.jsx)(p.A,{onClick:l,children:(0,r.jsx)(f.A,{})})]}),(0,r.jsx)(m.A,{sx:{display:"flex",flexDirection:"column",gap:2,paddingTop:5},children:(0,r.jsxs)(C.A,{variant:"body1",children:["Tem certeza que deseja excluir o contato"," ",(0,r.jsxs)("strong",{style:{color:n.palette.error.main},children:['"',t.name,'"']}),"?"]})}),(0,r.jsxs)(v.A,{sx:{justifyContent:"flex-end"},children:[(0,r.jsx)(g.A,{color:"error",onClick:l,children:"Cancelar"}),(0,r.jsx)(g.A,{variant:"contained",color:"error",onClick:()=>{a(t.id),l()},children:"Deletar"})]})]})}let k=(0,l.createContext)({}),w=()=>(0,l.useContext)(k);function N(e){let{children:t}=e,a=(0,l.useRef)(new n.WhatsappClient(s.M1)),{token:d}=(0,o.Z)(),[u,h]=(0,l.useState)([]),[x,p]=(0,l.useState)(!1),[m,j]=(0,l.useState)(null),A=(0,l.useCallback)(async(e,t)=>{try{if(d){let r=await a.current.updateContact(e,t);h(t=>t.map(t=>t.id===e?r:t)),C(),c.oR.success("Cliente atualizado com sucesso!")}}catch(e){i.Logger.error("Error updating contact",e),c.oR.error("Falha ao atualizar cliente!")}},[d]),v=(0,l.useCallback)(async e=>{try{d&&(await a.current.deleteContact(e),h(t=>t.filter(t=>t.id!==e)),c.oR.success("Contato deletado com sucesso!"))}catch(e){i.Logger.error("Error deleting contact",e),c.oR.error("Falha ao deletar cliente!")}},[d]),g=(0,l.useCallback)(async(e,t)=>{try{if(d){let r=await a.current.createContact(e,t.replace(/\D/g,""));h(e=>[...e,r]),c.oR.success("Contato criado com sucesso!"),C()}}catch(e){i.Logger.error("Error criar contact",e),c.oR.error("Falha ao atualizar cliente!")}},[d]),f=(0,l.useCallback)(e=>{j((0,r.jsx)(b,{contact:e}))},[g,A]),C=(0,l.useCallback)(()=>{j(null)},[]),w=(0,l.useCallback)(e=>{j((0,r.jsx)(y,{contact:e}))},[v]),N=(0,l.useCallback)(async()=>{try{p(!0);let e=await a.current.getContacts();h(e)}catch(e){i.Logger.error("Error loading contacts",e),c.oR.error("Falha ao carregar clientes!")}finally{p(!1)}},[]);return(0,l.useEffect)(()=>{d&&a.current&&(a.current.setAuth(d),N())},[d,a.current]),(0,r.jsxs)(k.Provider,{value:{contacts:u,updateContact:A,loadContacts:N,createContact:g,deleteContact:v,isLoading:x,openContactModal:f,closeModal:C,modal:m,handleDeleteContact:w},children:[t,m]})}},57616:(e,t,a)=>{Promise.resolve().then(a.bind(a,70709))},70709:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var r=a(95155),l=a(12115),n=a(83729),o=a(3127),i=a(19505),c=a(71159),s=a(28890);function d(e){let{contact:t,openEditModalHandler:a,deleteContactHandler:l}=e;return(0,r.jsxs)(c.oM,{children:[(0,r.jsx)(c.Yc,{children:t.id}),(0,r.jsx)(c.Yc,{children:t.name}),(0,r.jsx)(c.Yc,{children:t.phone}),(0,r.jsx)(c.Yc,{children:t.isBlocked?"Sim":"N\xe3o"}),(0,r.jsx)(c.Yc,{children:t.isOnlyAdmin?"Sim":"N\xe3o"}),(0,r.jsxs)(c.Yc,{align:"right",children:[(0,r.jsx)(n.A,{title:"Editar",children:(0,r.jsx)(o.A,{onClick:()=>a(t),children:(0,r.jsx)(s.A,{})})}),(0,r.jsx)(n.A,{title:"Excluir",children:(0,r.jsx)(o.A,{onClick:()=>l(t),color:"error",children:(0,r.jsx)(i.A,{})})})]})]})}var u=a(44296),h=a(17976),x=a(99776),p=a(14426),m=a(68534),j=a(56033),A=a(73731),v=a(76380);function g(e){var t,a;let{filters:l,setFilters:n}=e,o=(e,t)=>{let a={...l};""===t||"none"===t?delete a[e]:a[e]=t,n(a)};return(0,r.jsx)(j.A,{children:(0,r.jsxs)(c.oM,{className:"sticky top-0 z-10 rounded-md text-gray-600 bg-white dark:bg-indigo-900",children:[(0,r.jsx)(c.Yc,{sx:{width:"100px"},children:(0,r.jsx)(A.A,{label:"ID",variant:"standard",InputProps:{disableUnderline:!0},onChange:e=>o("id",e.target.value),value:(null==l?void 0:l.id)||"",type:"number"})}),(0,r.jsx)(c.Yc,{children:(0,r.jsx)(A.A,{label:"Nome",variant:"standard",InputProps:{disableUnderline:!0},onChange:e=>o("name",e.target.value),value:(null==l?void 0:l.name)||""})}),(0,r.jsx)(c.Yc,{children:(0,r.jsx)(A.A,{label:"Telefone",variant:"standard",InputProps:{disableUnderline:!0},onChange:e=>o("phone",e.target.value),value:(null==l?void 0:l.phone)||""})}),(0,r.jsx)(c.Yc,{children:(0,r.jsxs)(A.A,{label:"Bloqueado",variant:"standard",select:!0,style:{width:"6rem"},InputProps:{disableUnderline:!0},onChange:e=>o("isBlocked",e.target.value),value:null!==(t=null==l?void 0:l.isBlocked)&&void 0!==t?t:"none",children:[(0,r.jsx)(v.A,{value:"none",children:"Ambos"}),(0,r.jsx)(v.A,{value:"true",children:"Sim"}),(0,r.jsx)(v.A,{value:"false",children:"N\xe3o"})]})}),(0,r.jsx)(c.Yc,{sx:{width:"100px"},children:(0,r.jsxs)(A.A,{label:"Admin",variant:"standard",select:!0,style:{width:"6rem"},InputProps:{disableUnderline:!0},onChange:e=>o("isOnlyAdmin",e.target.value),value:null!==(a=null==l?void 0:l.isOnlyAdmin)&&void 0!==a?a:"none",children:[(0,r.jsx)(v.A,{value:"none",children:"Ambos"}),(0,r.jsx)(v.A,{value:"true",children:"Sim"}),(0,r.jsx)(v.A,{value:"false",children:"N\xe3o"})]})}),(0,r.jsx)(c.Yc,{sx:{width:"150px"}})]})})}var f=a(56204);function b(){let{contacts:e,isLoading:t,openContactModal:a,handleDeleteContact:n}=(0,f.GC)(),[o,i]=(0,l.useState)({});function s(e){a(e)}function j(e){n(e)}let A=(0,l.useMemo)(()=>e.filter(e=>(!o.id||e.id===Number(o.id))&&(!o.name||!!e.name.toLowerCase().includes(o.name.toLowerCase()))&&(!o.phone||!!e.phone.includes(o.phone))&&(!o.isBlocked||("true"!==o.isBlocked||!!e.isBlocked)&&("false"!==o.isBlocked||!e.isBlocked))&&(!o.isOnlyAdmin||("true"!==o.isOnlyAdmin||!!e.isOnlyAdmin)&&("false"!==o.isOnlyAdmin||!e.isOnlyAdmin))),[e,o]);return(0,r.jsxs)("div",{children:[(0,r.jsx)(u.A,{className:"mx-auto max-h-[70vh] overflow-auto rounded-md scrollbar-whatsapp shadow-md bg-white text-slate-800 dark:bg-slate-800 dark:text-slate-100",children:(0,r.jsxs)(h.A,{className:"max-h-[100%] overflow-auto scrollbar-whatsapp",children:[(0,r.jsx)(g,{filters:o,setFilters:function(e){i(e)}}),(0,r.jsx)(x.A,{children:t?(0,r.jsx)(c.oM,{className:"h-32 w-full",children:(0,r.jsx)(c.Yc,{colSpan:8,className:"flex items-center justify-center text-center text-gray-600 dark:text-gray-300",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)(p.A,{}),(0,r.jsx)("span",{className:"mt-2",children:"Carregando clientes..."})]})})}):A.map(e=>(0,r.jsx)(d,{contact:e,openEditModalHandler:s,deleteContactHandler:j},"".concat(e.id,"-").concat(e.instance,"-").concat(e.phone)))})]})}),!t&&(0,r.jsx)("div",{className:"flex h-fit w-full justify-center gap-4 px-4 pt-0",children:(0,r.jsx)(m.A,{onClick:function(){a()},variant:"outlined",children:"Cadastrar Contato"})})]})}function C(){return(0,r.jsx)("div",{className:"flex flex-col px-10 pt-5 w-screen h-screen box-border relative bg-white text-black dark:bg-gray-900 dark:text-white",children:(0,r.jsx)(b,{})})}},71159:(e,t,a)=>{"use strict";a.d(t,{Yc:()=>s,oM:()=>d});var r=a(75955),l=a(59832),n=a(58416),o=a(90404),i=a(2044),c=a(9560);let s=(0,r.Ay)(l.A)(e=>{let{theme:t}=e;return{border:"none",["&.".concat(n.A.head)]:{color:"dark"===t.palette.mode?t.palette.common.white:t.palette.text.primary,backgroundColor:"dark"===t.palette.mode?"transparent":t.palette.grey[100],fontWeight:"bold"},["&.".concat(n.A.body)]:{fontSize:14,color:"dark"===t.palette.mode?t.palette.common.white:t.palette.text.primary}}}),d=(0,r.Ay)(o.A)(e=>{let{theme:t}=e;return{"&:nth-of-type(even)":{backgroundColor:"dark"===t.palette.mode?"rgba(67, 56, 202, 0.05)":t.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}});(0,r.Ay)(i.A)(e=>{let{theme:t}=e;return{["& .".concat(c.A.root)]:{color:"dark"===t.palette.mode?t.palette.common.white:t.palette.text.primary,"&.Mui-selected":{backgroundColor:t.palette.primary.main,color:t.palette.common.white},"&:hover":{backgroundColor:t.palette.primary.dark,color:t.palette.common.white}}}})},99776:(e,t,a)=>{"use strict";a.d(t,{A:()=>A});var r=a(12115),l=a(52596),n=a(17472),o=a(61391),i=a(75955),c=a(10186),s=a(55170),d=a(90870);function u(e){return(0,d.Ay)("MuiTableBody",e)}(0,s.A)("MuiTableBody",["root"]);var h=a(95155);let x=e=>{let{classes:t}=e;return(0,n.A)({root:["root"]},u,t)},p=(0,i.Ay)("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),m={variant:"body"},j="tbody",A=r.forwardRef(function(e,t){let a=(0,c.b)({props:e,name:"MuiTableBody"}),{className:r,component:n=j,...i}=a,s={...a,component:n},d=x(s);return(0,h.jsx)(o.A.Provider,{value:m,children:(0,h.jsx)(p,{className:(0,l.A)(d.root,r),as:n,ref:t,role:n===j?null:"rowgroup",ownerState:s,...i})})})}},e=>{var t=t=>e(e.s=t);e.O(0,[4488,9141,8534,1620,6805,4954,35,5332,4290,3729,8702,8441,1684,7358],()=>t(57616)),_N_E=e.O()}]);