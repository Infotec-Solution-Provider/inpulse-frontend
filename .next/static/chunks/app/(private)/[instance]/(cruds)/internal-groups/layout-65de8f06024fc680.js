(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8230],{19176:(r,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>u});var a=t(95155),o=t(34788);function u(r){let{children:e}=r;return(0,a.jsx)(o.A,{children:e})}},32740:(r,e,t)=>{Promise.resolve().then(t.bind(t,19176))},34788:(r,e,t)=>{"use strict";t.d(e,{A:()=>d,e:()=>p});var a=t(95155),o=t(12115),u=t(40931),n=t(98892),c=t(23464),s=t(88702),i=t(38543);let l=(0,o.createContext)({}),p=()=>{let r=(0,o.useContext)(l);if(!r)throw Error("useWhatsappContext must be used within a WhatsappProvider");return r};function d(r){let{children:e}=r,{token:t}=(0,o.useContext)(n.c),{internalApi:p}=(0,o.useContext)(u.xI),[d,g]=(0,o.useState)([]),[h,m]=(0,o.useState)([]),I=async(r,e)=>{if(p.current){let t=await p.current.updateInternalGroup(r,e);g(e=>e.map(e=>e.id===r?t:e))}},f=async(r,e)=>{if(p.current)try{let t=await p.current.updateInternalGroupImage(r,e);g(e=>e.map(e=>e.id===r?{...e,groupImageFileId:t.groupImageFileId}:e)),i.oR.success("Imagem do grupo atualizada com sucesso!")}catch(r){console.error("Error updating internal group image",r),i.oR.error("Erro ao atualizar imagem do grupo")}},E=async r=>{if(p.current)try{let e=await p.current.createInternalChat(r.participants,!0,r.name,r.groupId,r.groupImage);console.log("created",e),i.oR.success("Grupo criado com sucesso!"),g(r=>[e,...r])}catch(r){console.error("Error creating internal group",r),i.oR.error("Erro ao criar grupo")}},w=async r=>{if(p.current)try{await p.current.deleteInternalChat(r),i.oR.success("Grupo deletado com sucesso!"),g(e=>e.filter(e=>e.id!==r))}catch(r){i.oR.error("Erro ao deletar grupo")}};return(0,o.useEffect)(()=>{t&&p.current&&(p.current.setAuth(t),p.current.getInternalGroups().then(r=>{g(r)}),c.A.get(s.M1+"/api/whatsapp/groups",{headers:{Authorization:"Bearer ".concat(t)}}).then(r=>{console.log(r.data.data),m(r.data.data)}))},[t]),(0,a.jsx)(l.Provider,{value:{internalGroups:d,wppGroups:h,updateInternalGroup:I,createInternalGroup:E,deleteInternalGroup:w,updateInternalGroupImage:f},children:e})}}},r=>{var e=e=>r(r.s=e);r.O(0,[4488,9141,8534,1620,6805,35,8702,931,8441,1684,7358],()=>e(32740)),_N_E=r.O()}]);