(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5934],{11084:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(29839).A)({palette:{mode:"dark"}})},16556:(e,t,r)=>{Promise.resolve().then(r.bind(r,82865))},64569:(e,t,r)=>{"use strict";r.d(t,{pI:()=>c,Ay:()=>u,qw:()=>d});var s=r(95155),a=r(12115),n=r(54607),l=r(98892),o=r(42732),i=r(38543);let c=(0,a.createContext)({}),d=()=>(0,a.useContext)(c);function u(e){let{children:t}=e,r=(0,a.useRef)(new n.CustomersClient("http://localhost:8002")),{token:d}=(0,l.Z)(),[u,h]=(0,a.useReducer)(function e(t,r){let s={...t};switch(r.type){case"change-loading":return{...s,isLoading:r.isLoading};case"change-page":return s.filters.page=r.page.toString(),s;case"change-per-page":return s.filters.perPage=r.perPage.toString(),s;case"change-total-rows":return s.totalRows=r.totalRows,{...s,totalRows:r.totalRows};case"change-filters":return s.filters={page:t.filters.page,perPage:t.filters.perPage,...r.filters},s;case"load-customers":return s.customers=r.customers,s;case"update-customer":return{...s,customers:s.customers.map(e=>e.CODIGO===r.id?{...e,...r.data}:e)};case"add-customer":return s.customers.unshift(r.data),s;case"multiple":let a={...t};for(let t of r.actions)a=e(a,t);return a;default:return s}},{customers:[],totalRows:0,filters:{},isLoading:!1}),x=(0,a.useCallback)(async e=>{try{d&&(await r.current.createCustomer(e),i.oR.success("Cliente cadastrado com sucesso!"))}catch(e){o.Logger.error("Error creating customer",e),i.oR.error("Falha ao cadastrar cliente!")}finally{g()}},[d]),m=(0,a.useCallback)(async(e,t)=>{try{d&&(await r.current.updateCustomer(e,t),h({type:"update-customer",id:e,data:t}),i.oR.success("Cliente atualizado com sucesso!"))}catch(e){o.Logger.error("Error updating customer",e),i.oR.error("Falha ao atualizar cliente!")}},[d]),g=(0,a.useCallback)(async()=>{h({type:"change-loading",isLoading:!0});try{let e=await r.current.getCustomers(u.filters);h({type:"multiple",actions:[{type:"change-total-rows",totalRows:e.page.totalRows},{type:"change-loading",isLoading:!1},{type:"load-customers",customers:e.data}]})}catch(e){h({type:"change-loading",isLoading:!1}),o.Logger.error("Error loading customers",e),i.oR.error("Falha ao carregar clientes!")}},[]);return(0,a.useEffect)(()=>{d&&r.current&&(r.current.setAuth(d),g())},[d,r.current]),(0,s.jsx)(c.Provider,{value:{state:u,dispatch:h,updateCustomer:m,createCustomer:x,loadCustomers:g},children:t})}},78286:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,m:()=>c});var s=r(95155),a=r(54607),n=r(12115),l=r(98892),o=r(38543);let i=(0,n.createContext)({}),c=()=>(0,n.useContext)(i);function d(e){let{children:t}=e,{token:r}=(0,n.useContext)(l.c),[c,d]=(0,n.useState)([]),u=(0,n.useRef)(new a.ReadyMessageClient("http://localhost:8005")),h=[{name:"@sauda\xe7\xe3o_tempo",replaceFor:"currentSaudation"},{name:"@cliente_razao",replaceFor:"customerRazao"},{name:"@cliente_cnpj",replaceFor:"customerCnpj"},{name:"@atendente_nome",replaceFor:"operatorName"},{name:"@atendente_nome_exibicao",replaceFor:"operatorNameExibition"},{name:"@contato_primeiro_nome",replaceFor:"customerFirstName"},{name:"@contato_nome_completo",replaceFor:"customerFullName"}],x=(0,n.useCallback)(async(e,t,s)=>{if(r)try{if(!s)return;let r=await u.current.updateReadyMessage(e,t,s);d(t=>t.map(t=>t.CODIGO===e?{...t,file:r.ARQUIVO}:t)),o.oR.success("Arquivo do Mensagem pronta atualizada com sucesso!")}catch(e){console.error("Error updating readyMessage image",e),o.oR.error("Erro ao atualizar Arquivo do Mensagem pronta")}},[r]),m=(0,n.useCallback)(async(e,t,s,a)=>{if(r)try{let r=await u.current.createReadyMessage(e,t,s,a);d(e=>[r,...e||[]])}catch(e){console.error("Error creating readyMessage",e),o.oR.error("Erro ao criar Mensagem pronta")}},[r]),g=(0,n.useCallback)(async e=>{if(r)try{await u.current.deleteReadyMessage(e),o.oR.success("Mensagem pronta  deletado com sucesso!"),d(t=>t.filter(t=>t.CODIGO!==e))}catch(e){o.oR.error("Erro ao deletar Mensagem pronta")}},[r]),p=(0,n.useCallback)(async()=>{r&&u.current&&(u.current.setAuth(r),d(await u.current.getReadyMessages()))},[r]);return(0,n.useEffect)(()=>{r&&u.current&&(u.current.setAuth(r),u.current.getReadyMessages().then(e=>{d(e)}))},[r,u.current]),(0,s.jsx)(i.Provider,{value:{readyMessages:c,updateReadyMessage:x,createReadyMessage:m,deleteReadyMessage:g,variables:h,replaceVariables:function(e){let{message:t,values:r}=e;return h.forEach(e=>{t=t.replaceAll(e.name,r[e.replaceFor])}),t},fetchReadyMessages:p},children:t})}},82865:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ea});var s=r(95155),a=r(66766),n=r(58035),l=r(15808),o=r(43290),i=r(12115),c=r(98892),d=r(65528),u=r(22376),h=r(85222),x=r(12939),m=r(54581),g=r(63148),p=r(74964),j=r(39489),f=r(3127),A=r(83729),y=r(68534),C=r(5087),v=r(76380),k=r(6874),w=r.n(k),b=r(35695);function N(e){let{title:t,children:r,href:a,routes:n,disabled:l}=e,[o,c]=i.useState(null),d=!!o,u=()=>{c(null)},h=(0,b.usePathname)().split("/")[1];return(0,s.jsx)("li",{"aria-disabled":!!l,className:"relative list-none aria-disabled:hidden",children:(0,s.jsx)(A.A,{title:(0,s.jsx)("h2",{className:"text-base",children:t}),arrow:!0,disableHoverListener:d,children:n?(0,s.jsxs)("div",{children:[(0,s.jsx)(y.A,{onClick:e=>{c(e.currentTarget)},children:r}),(0,s.jsx)(C.A,{anchorEl:o,open:d,onClose:u,children:n.map(e=>(0,s.jsx)(v.A,{onClick:u,children:(0,s.jsx)(w(),{href:"/".concat(h).concat(e.href),children:e.title})},e.title))})]}):(0,s.jsx)(y.A,{component:w(),href:"/".concat(h).concat(a),children:r})})})}var R=r(37375),E=r(54048),M=r(44389),L=r(89201),S=r(61872),_=r(54607),F=r(88702),O=r(77934),I=r(98387),P=r(33196),z=r(11084);let W=(0,r(29839).A)({palette:{mode:"light"}}),T=(0,i.createContext)({theme:"dark",toggleTheme:()=>{}});function D(e){let{children:t}=e,[r,a]=(0,i.useState)("dark");(0,i.useEffect)(()=>{let e=localStorage.getItem("themeMode");("light"===e||"dark"===e)&&a(e)},[]),(0,i.useEffect)(()=>{document.documentElement.classList.toggle("dark","dark"===r),localStorage.setItem("themeMode",r)},[r]);let n=(0,i.useMemo)(()=>"dark"===r?z.A:W,[r]);return(0,s.jsx)(T.Provider,{value:{theme:r,toggleTheme:()=>{a(e=>"dark"===e?"light":"dark")}},children:(0,s.jsx)(P.A,{theme:n,children:t})})}function G(){let{theme:e,toggleTheme:t}=(0,i.useContext)(T);return(0,s.jsx)(f.A,{title:"Alternar tema",onClick:t,sx:{color:"dark"===e?"#FACC15":"#111827"},children:"dark"===e?(0,s.jsx)(O.A,{}):(0,s.jsx)(I.A,{})})}var U=r(97482),V=r(700),q=r(16324);function B(){let e=(0,q.A)(),{notifications:t,getNotifications:r,markAllAsReadNotification:a}=(0,i.useContext)(F.ce),[n,l]=(0,i.useState)(null),c=()=>{l(null)},d=async()=>{await a(),c()},u=t.filter(e=>!e.read);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.A,{color:"inherit",onClick:e=>{l(e.currentTarget),r()},"aria-label":"notifica\xe7\xf5es",children:(0,s.jsx)(U.A,{badgeContent:u.length,color:"error",max:99,children:(0,s.jsx)(o.A,{sx:{color:e.palette.text.primary}})})}),(0,s.jsxs)(C.A,{anchorEl:n,open:!!n,onClose:c,PaperProps:{style:{maxHeight:400,width:360,padding:0},elevation:4},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[(0,s.jsxs)(m.A,{px:2,py:1,display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"background.paper",borderBottom:1,borderColor:"divider",children:[(0,s.jsx)(V.A,{variant:"h6",component:"div",sx:{fontWeight:"bold"},children:"Notifica\xe7\xf5es"}),(0,s.jsx)(y.A,{size:"small",onClick:d,disabled:!u.length,sx:{textTransform:"none"},children:"Limpar"})]}),0===u.length?(0,s.jsx)(v.A,{disabled:!0,sx:{justifyContent:"center",fontStyle:"italic"},children:"Sem notifica\xe7\xf5es"}):u.map(e=>(0,s.jsx)(v.A,{onClick:c,divider:!0,children:(0,s.jsx)(h.A,{primary:(0,s.jsx)(V.A,{sx:{fontWeight:"medium",fontSize:"1rem"},children:e.title}),secondary:(0,s.jsx)(V.A,{variant:"body2",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"normal"},children:e.description})})},e.id||e.title))]})]})}let H=[{title:"Conversas",href:"/monitor/chats"},{title:"Conversas Internas",href:"/monitor/internal-chats"},{title:"Conversas (Novo)",href:"/monitor"}],K=(e,t)=>{let r=[{title:"Usu\xe1rios",href:"/users"},{title:"Clientes",href:"/customers"},{title:"Contatos",href:"/contacts"},{title:"Mensagens prontas",href:"/ready-messages"}];return("nunes"!==e&&"vollo"!==e||3==t)&&r.push({title:"Grupos Internos",href:"/internal-groups"}),r},Q=[{title:"Clientes",href:"/customers"},{title:"Contatos",href:"/contacts"}],Z=e=>{let{open:t,onClose:r,user:o,instance:i,isUserAdmin:c,signOut:f,reportsRoutes:A}=e,y=(0,b.usePathname)().split("/")[1],C=e=>e.map(e=>(0,s.jsx)(d.Ay,{disablePadding:!0,children:(0,s.jsx)(w(),{href:"/".concat(y).concat(e.href),className:"w-full",onClick:r,children:(0,s.jsx)(u.A,{children:(0,s.jsx)(h.A,{primary:e.title})})})},e.title));return(0,s.jsx)(x.Ay,{anchor:"right",open:t,onClose:r,PaperProps:{sx:{width:280,bgcolor:"background.paper",color:"text.primary"}},children:(0,s.jsx)(m.A,{role:"presentation",onClick:r,onKeyDown:r,children:(0,s.jsxs)(g.A,{children:[(0,s.jsx)(d.Ay,{children:(0,s.jsx)(w(),{href:"/".concat(i,"/"),className:"w-full",children:(0,s.jsx)(a.default,{src:n.A,alt:"Logo",height:36,className:"cursor-pointer"})})}),(0,s.jsx)(p.A,{}),(0,s.jsx)(d.Ay,{children:(0,s.jsx)(w(),{href:"/".concat(i,"/"),className:"w-full",children:(0,s.jsxs)(u.A,{children:[(0,s.jsx)(j.A,{children:(0,s.jsx)(R.A,{})}),(0,s.jsx)(h.A,{primary:"\xc1rea de Atendimento"})]})})}),c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Ay,{children:(0,s.jsx)(h.A,{primary:"Monitoria",sx:{pl:2,pt:1,fontWeight:"bold"}})}),C([{title:"Agendamentos",href:"/monitor/schedules"},{title:"Conversas",href:"/monitor/chats"},{title:"Conversas Internas",href:"/monitor/internal-chats"}])]}),(0,s.jsx)(d.Ay,{children:(0,s.jsx)(h.A,{primary:"Cadastros",sx:{pl:2,pt:1,fontWeight:"bold"}})}),C(c?K(i,null==o?void 0:o.SETOR):Q),c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Ay,{children:(0,s.jsx)(h.A,{primary:"Relat\xf3rios",sx:{pl:2,pt:1,fontWeight:"bold"}})}),C(A)]}),(0,s.jsx)(p.A,{sx:{my:2}}),(0,s.jsx)(d.Ay,{children:(0,s.jsxs)(u.A,{onClick:f,children:[(0,s.jsx)(j.A,{children:(0,s.jsx)(l.A,{})}),(0,s.jsx)(h.A,{primary:"Sair"})]})})]})})})};function J(){let{currentChat:e}=(0,i.useContext)(F.ce),{signOut:t,user:r,instance:d}=(0,i.useContext)(c.c),[u,h]=(0,i.useState)(!1),[x,m]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{let e=()=>{m(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),x&&e)return null;let g=(null==r?void 0:r.NIVEL)===_.UserRole.ADMIN,p=[{title:"Conversas",href:"/reports/chats"},...(null==r?void 0:r.NIVEL)===_.UserRole.ADMIN?[{title:"Gerador de Relat\xf3rio",href:"/reports/report-generator"}]:[]];return(0,s.jsxs)("header",{className:"sticky top-0 z-20 shadow-md",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("div",{className:"mx-auto flex w-screen items-center justify-between bg-slate-200 px-4 py-4 dark:bg-slate-800 md:pt-3 pt-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[x&&(0,s.jsx)(f.A,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:()=>{h(!u)},className:"mr-2",children:(0,s.jsx)(M.A,{className:"text-gray-900 dark:text-slate-200"})}),(0,s.jsx)(w(),{href:"/".concat(d,"/"),children:(0,s.jsx)(a.default,{src:n.A,alt:"Logo",height:36,className:"cursor-pointer"})})]}),(0,s.jsx)("div",{className:"hidden md:flex flex-1 justify-center",children:(0,s.jsx)("nav",{children:(0,s.jsxs)("menu",{className:"flex items-center gap-4 text-sm font-semibold text-gray-900 dark:text-slate-200",children:[(0,s.jsx)(N,{title:"\xc1rea de Atendimento",href:"/",children:(0,s.jsx)(R.A,{className:"text-gray-900 dark:text-slate-200"})}),(0,s.jsx)(N,{title:"Monitoria",routes:H,disabled:!g,children:(0,s.jsx)(E.A,{className:"text-gray-900 dark:text-slate-200"})}),(0,s.jsx)(N,{title:"Cadastros",routes:K(d,null==r?void 0:r.SETOR),disabled:!g,children:(0,s.jsx)(S.A,{className:"text-gray-900 dark:text-slate-200"})}),(0,s.jsx)(N,{title:"Cadastros",routes:Q,disabled:g,children:(0,s.jsx)(S.A,{className:"text-gray-900 dark:text-slate-200"})}),g&&(0,s.jsx)(N,{title:"Relat\xf3rios",routes:p,children:(0,s.jsx)(L.A,{className:"text-gray-900 dark:text-slate-200"})})]})})}),(0,s.jsxs)("div",{className:"hidden md:flex items-center gap-2",children:[(0,s.jsx)(G,{}),(0,s.jsx)(B,{}),(0,s.jsx)("h1",{className:"truncate text-gray-900 dark:text-slate-200 mx-4",children:null==r?void 0:r.NOME}),(0,s.jsx)(f.A,{onClick:t,children:(0,s.jsx)(l.A,{className:"text-gray-900 dark:text-slate-200"})})]}),(0,s.jsxs)("div",{className:"flex md:hidden gap-2",children:[(0,s.jsx)(f.A,{children:(0,s.jsx)(o.A,{className:"text-gray-900 dark:text-slate-200"})}),(0,s.jsx)(f.A,{onClick:t,children:(0,s.jsx)(l.A,{className:"text-gray-900 dark:text-slate-200"})})]})]})}),(0,s.jsx)(Z,{open:u,onClose:()=>h(!1),user:r,instance:d,isUserAdmin:g,signOut:t,reportsRoutes:p})]})}var X=r(92697),Y=r(28450),$=r(16460),ee=r(40931),et=r(78286),er=r(64569),es=r(56204);function ea(e){let{children:t}=e,[r,a]=(0,i.useState)(null);return(0,s.jsx)("div",{className:"box-border h-auto md:h-screen w-full md:w-screen overflow-hidden",children:(0,s.jsx)(X.Ay,{modal:r,setModal:a,children:(0,s.jsx)(Y.A,{children:(0,s.jsx)(F.Ay,{children:(0,s.jsx)(es.Ay,{children:(0,s.jsx)(ee.l1,{children:(0,s.jsx)(et.A,{children:(0,s.jsx)(er.Ay,{children:(0,s.jsx)(D,{children:(0,s.jsxs)("div",{className:"grid h-auto md:h-screen w-full md:w-screen auto-rows-max grid-rows-[max-content_minmax(0,1fr)] md:grid-rows-[max-content_minmax(400px,1fr)]",children:[(0,s.jsx)(J,{}),t,(0,s.jsx)($.A,{open:!!r,onClose:(e,t)=>{"backdropClick"!==t&&a(null)},className:"flex items-center justify-center",children:(0,s.jsx)("div",{children:r})})]})})})})})})})})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4488,9141,8534,1620,6805,4954,35,3729,4805,699,6109,8471,8702,931,8441,1684,7358],()=>t(16556)),_N_E=e.O()}]);