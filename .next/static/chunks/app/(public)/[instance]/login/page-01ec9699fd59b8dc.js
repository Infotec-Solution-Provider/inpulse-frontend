(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5435],{11084:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(29839).A)({palette:{mode:"dark"}})},11529:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(95155),a=r(58035),s=r(66766),l=r(12115),i=r(98892),o=r(33196),c=r(73731),u=r(68534),A=r(11084);function d(e){let{params:t}=e,{signIn:r}=(0,l.useContext)(i.c),d=(0,l.useRef)(null),h=async e=>{e.preventDefault();let{instance:n}=await t,a=Object.fromEntries(new FormData(d.current).entries());await r(n,{login:a.login,password:a.password})};return(0,n.jsx)("div",{className:"flex h-screen w-screen items-center",children:(0,n.jsx)(o.A,{theme:A.A,children:(0,n.jsxs)("form",{className:"mx-auto box-border flex w-80 flex-col gap-4 rounded-md bg-indigo-500/5 px-8 py-8 pt-14",onSubmit:h,ref:d,children:[(0,n.jsx)(s.default,{src:a.A,alt:"Logo",height:64,className:"mb-12"}),(0,n.jsx)(c.A,{title:"Login",name:"login",placeholder:"Digite seu login",required:!0,autoComplete:"username"}),(0,n.jsx)(c.A,{title:"Senha",name:"password",placeholder:"Digite sua senha",type:"password",required:!0,autoComplete:"current-password"}),(0,n.jsx)(u.A,{fullWidth:!0,sx:{paddingTop:1.5,paddingBottom:1.5,marginTop:.5},variant:"contained",type:"submit",children:"Entrar"})]})})})}},49271:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=new(r(54607)).UsersClient("https://inpulse.infotecrs.inf.br")},50546:(e,t,r)=>{Promise.resolve().then(r.bind(r,11529))},58035:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n={src:"/_next/static/media/hlogodark.58e397dd.png",height:590,width:982,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAAP1BMVEVMaXHiIiW/PwDsPiPpMiOJJI3sKiXpJSTbLyPxLiXtQyTrNCX1QiTsKiSuIln1LSexH0u5IkPdKSr9LCn/PyjHk6odAAAAE3RSTlMAsgTPUUXjOhXt2LryKsjxc1/iTlJkQAAAAAlwSFlzAAAuIwAALiMBeKU/dgAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIDUuMS40Et+mgwAAAC1JREFUeJwFwYcBACAIwLCKIu79/60mAELyBQid+hqaZnQ3B3ScfKMBa5sz5AMV3wEXXx6ffwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:5}},98892:(e,t,r)=>{"use strict";r.d(t,{c:()=>A,default:()=>h,Z:()=>d});var n=r(95155),a=r(12115);let s=new(r(54607)).AuthClient("https://inpulse.infotecrs.inf.br");var l=r(38543),i=r(23464),o=r(35695),c=r(42732),u=r(49271);let A=(0,a.createContext)({});function d(){let e=(0,a.useContext)(A);if(!e)throw Error("useAuthContext must be used within an AuthProvider");return e}function h(e){let{children:t}=e,r=(0,o.useRouter)(),d=(0,o.usePathname)(),h=(0,a.useRef)(d.split("/")[1]),[g,p]=(0,a.useState)(null),[m,f]=(0,a.useState)(null),w=(0,a.useCallback)(async(e,t)=>{let{login:n,password:a}=t;try{let t=await s.login(e,n,a);localStorage.setItem("@inpulse/".concat(e,"/token"),t.token),h.current=e,p(t.user),f(t.token),i.A.defaults.headers.authorization="Bearer ".concat(t.token),r.replace("/".concat(e))}catch(e){l.oR.error("Falha ao logar!\n"+(0,c.sanitizeErrorMessage)(e))}},[r]),x=(0,a.useCallback)(()=>{f(null),localStorage.removeItem("@inpulse/".concat(h.current,"/token")),r.replace("/".concat(h.current,"/login")),p(null)},[r]);return(0,a.useEffect)(()=>{h.current=d.split("/")[1];let e=localStorage.getItem("@inpulse/".concat(h.current,"/token"));f(e),e&&(u.A.setAuth(e),s.fetchSessionData(e).then(async t=>{h.current=t.instance,i.A.defaults.headers.authorization="Bearer ".concat(e),u.A.setAuth("Bearer ".concat(e)),p(await u.A.getUserById(t.userId)),d.includes("login")&&r.replace("/".concat(h.current))}).catch(e=>{l.oR.error(e.message||"Sess\xe3o expirada, fa\xe7a o login novamente!"),localStorage.removeItem("@inpulse/".concat(h.current,"/token")),p(null),d.includes("login")||r.replace("/".concat(h.current,"/login"))})),e||d.includes("login")||r.replace("/".concat(h.current,"/login"))},[d,r]),(0,n.jsx)(A.Provider,{value:{user:g,token:m,isAuthenticated:!1,signIn:w,signOut:x,instance:h.current},children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4488,9141,8534,699,8441,1684,7358],()=>t(50546)),_N_E=e.O()}]);